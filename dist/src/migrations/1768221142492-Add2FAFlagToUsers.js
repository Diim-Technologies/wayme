"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Add2FAFlagToUsers1768221142492 = void 0;
class Add2FAFlagToUsers1768221142492 {
    constructor() {
        this.name = 'Add2FAFlagToUsers1768221142492';
    }
    async up(queryRunner) {
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP CONSTRAINT "FK_dispute_messages_disputeId"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP CONSTRAINT "FK_dispute_messages_userId"`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP CONSTRAINT "FK_disputes_userId"`);
        await queryRunner.query(`ALTER TABLE "users" DROP CONSTRAINT "FK_b1bda35cdb9a2c1b777f5541d87"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP CONSTRAINT "FK_kyc_documents_userId"`);
        await queryRunner.query(`DROP INDEX "public"."notifications_userId_fkey"`);
        await queryRunner.query(`DROP INDEX "public"."otps_userId_fkey"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_dispute_messages_disputeId"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_dispute_messages_userId"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_disputes_transactionId"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_disputes_userId"`);
        await queryRunner.query(`DROP INDEX "public"."transactions_transferId_fkey"`);
        await queryRunner.query(`DROP INDEX "public"."transfers_senderId_fkey"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_stripe_payment_methods_stripeType"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_stripe_payment_methods_category"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_kyc_documents_userId"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_7102206bea45893b7fd8f9e5dd"`);
        await queryRunner.query(`ALTER TABLE "users" DROP CONSTRAINT "REL_b1bda35cdb9a2c1b777f5541d8"`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "profileId"`);
        await queryRunner.query(`ALTER TABLE "fees" DROP COLUMN "minimumAmount"`);
        await queryRunner.query(`ALTER TABLE "fees" DROP COLUMN "maximumAmount"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP COLUMN "buyRate"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP COLUMN "sellRate"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP COLUMN "source"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP COLUMN "lastUpdated"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "isTwoFactorEnabled" boolean NOT NULL DEFAULT true`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD "decimalPlaces" integer NOT NULL DEFAULT '2'`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "FK_692a909ee0fa9383e7859f9b406"`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "PK_6a72c3c0f683f6462415e653c3a"`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "PK_6a72c3c0f683f6462415e653c3a" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "type"`);
        await queryRunner.query(`CREATE TYPE "public"."notifications_type_enum" AS ENUM('TRANSFER_SENT', 'TRANSFER_RECEIVED', 'TRANSFER_COMPLETED', 'TRANSFER_FAILED', 'KYC_APPROVED', 'KYC_REJECTED', 'PAYMENT_REMINDER', 'SECURITY_ALERT', 'PAYMENT_METHOD_ADDED', 'SUBSCRIPTION_CANCELLED')`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "type" "public"."notifications_type_enum" NOT NULL`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "message"`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "message" text NOT NULL`);
        await queryRunner.query(`ALTER TABLE "otps" DROP CONSTRAINT "FK_82b0deb105275568cdcef2823eb"`);
        await queryRunner.query(`ALTER TABLE "otps" DROP CONSTRAINT "PK_91fef5ed60605b854a2115d2410"`);
        await queryRunner.query(`ALTER TABLE "otps" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "otps" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "otps" ADD CONSTRAINT "PK_91fef5ed60605b854a2115d2410" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "otps" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "otps" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "otps" DROP COLUMN "type"`);
        await queryRunner.query(`CREATE TYPE "public"."otps_type_enum" AS ENUM('PASSWORD_RESET', 'EMAIL_VERIFICATION', 'TWO_FACTOR_AUTH')`);
        await queryRunner.query(`ALTER TABLE "otps" ADD "type" "public"."otps_type_enum" NOT NULL`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP CONSTRAINT "PK_dispute_messages"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD CONSTRAINT "PK_8826f78d556a1846f8cbad5ed05" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP COLUMN "disputeId"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD "disputeId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP CONSTRAINT "PK_disputes"`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD CONSTRAINT "PK_3c97580d01c1a4b0b345c42a107" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "transactionId"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "transactionId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "category"`);
        await queryRunner.query(`CREATE TYPE "public"."disputes_category_enum" AS ENUM('WRONG_AMOUNT', 'DELAYED_TRANSFER', 'UNAUTHORIZED', 'FAILED_TRANSACTION', 'POOR_SERVICE', 'OTHER')`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "category" "public"."disputes_category_enum" NOT NULL`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "status"`);
        await queryRunner.query(`CREATE TYPE "public"."disputes_status_enum" AS ENUM('OPEN', 'IN_PROGRESS', 'RESOLVED', 'CLOSED')`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "status" "public"."disputes_status_enum" NOT NULL DEFAULT 'OPEN'`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "priority"`);
        await queryRunner.query(`CREATE TYPE "public"."disputes_priority_enum" AS ENUM('LOW', 'MEDIUM', 'HIGH')`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "priority" "public"."disputes_priority_enum" NOT NULL DEFAULT 'MEDIUM'`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "resolvedBy"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "resolvedBy" uuid`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP CONSTRAINT "FK_75b351b96bec8017e8b25014fab"`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP CONSTRAINT "PK_a219afd8dd77ed80f5a862f1db9"`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD CONSTRAINT "PK_a219afd8dd77ed80f5a862f1db9" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "transferId"`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "transferId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "type"`);
        await queryRunner.query(`CREATE TYPE "public"."transactions_type_enum" AS ENUM('DEBIT', 'CREDIT', 'FEE', 'REFUND')`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "type" "public"."transactions_type_enum" NOT NULL`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "status"`);
        await queryRunner.query(`CREATE TYPE "public"."transactions_status_enum" AS ENUM('PENDING', 'PROCESSING', 'COMPLETED', 'SUCCESS', 'FAILED', 'CANCELLED')`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "status" "public"."transactions_status_enum" NOT NULL DEFAULT 'PENDING'`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_eaff62410fcb0167e66c5393ce5"`);
        await queryRunner.query(`ALTER TABLE "banks" DROP CONSTRAINT "PK_3975b5f684ec241e3901db62d77"`);
        await queryRunner.query(`ALTER TABLE "banks" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "banks" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "banks" ADD CONSTRAINT "PK_3975b5f684ec241e3901db62d77" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_d6385758cb5394ac2fdbfe118a3"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_6d8e1008c743bac0b9c92661512"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_8faa4633cb8ff14db59673e3b9f"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "PK_f712e908b465e0085b4408cabc3"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "PK_f712e908b465e0085b4408cabc3" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "senderId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "senderId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "receiverId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "receiverId" uuid`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "status"`);
        await queryRunner.query(`CREATE TYPE "public"."transfers_status_enum" AS ENUM('PENDING', 'PROCESSING', 'COMPLETED', 'FAILED', 'CANCELLED', 'REFUNDED')`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "status" "public"."transfers_status_enum" NOT NULL DEFAULT 'PENDING'`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "paymentMethodId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "paymentMethodId" uuid`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "recipientBankId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "recipientBankId" uuid`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "notes" text`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP CONSTRAINT "FK_580f1dbf7bceb9c2cde8baf7ff4"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP CONSTRAINT "PK_34f9b8c6dfb4ac3559f7e2820d1"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD CONSTRAINT "PK_34f9b8c6dfb4ac3559f7e2820d1" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP COLUMN "type"`);
        await queryRunner.query(`CREATE TYPE "public"."payment_methods_type_enum" AS ENUM('CARD', 'BANK_TRANSFER', 'MOBILE_MONEY', 'CRYPTO')`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD "type" "public"."payment_methods_type_enum" NOT NULL`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" DROP CONSTRAINT "FK_50064b54d514b72a49e2b7bb574"`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP CONSTRAINT "FK_8481388d6325e752cd4d7e26c6d"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP CONSTRAINT "PK_1ec6662219f4605723f1e41b6cb"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD CONSTRAINT "PK_1ec6662219f4605723f1e41b6cb" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP CONSTRAINT "UQ_8481388d6325e752cd4d7e26c6d"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD CONSTRAINT "UQ_8481388d6325e752cd4d7e26c6d" UNIQUE ("userId")`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "dateOfBirth"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "dateOfBirth" date`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "kycReviewedBy"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "kycReviewedBy" character varying`);
        await queryRunner.query(`ALTER TABLE "users" DROP CONSTRAINT "PK_a3ffb1c0c8416b9fc6f907b7433"`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "users" ADD CONSTRAINT "PK_a3ffb1c0c8416b9fc6f907b7433" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "role"`);
        await queryRunner.query(`CREATE TYPE "public"."users_role_enum" AS ENUM('USER', 'ADMIN', 'SUPER_ADMIN')`);
        await queryRunner.query(`ALTER TABLE "users" ADD "role" "public"."users_role_enum" NOT NULL DEFAULT 'USER'`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "kycStatus"`);
        await queryRunner.query(`CREATE TYPE "public"."users_kycstatus_enum" AS ENUM('NOT_SUBMITTED', 'PENDING', 'APPROVED', 'REJECTED', 'UNDER_REVIEW')`);
        await queryRunner.query(`ALTER TABLE "users" ADD "kycStatus" "public"."users_kycstatus_enum" NOT NULL DEFAULT 'NOT_SUBMITTED'`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "isActive" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "requiresInvite" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" DROP COLUMN "metadata"`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ADD "metadata" json`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "createdAt" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "createdAt" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "updatedAt" SET NOT NULL`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "updatedAt" SET DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP CONSTRAINT "PK_kyc_documents"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD CONSTRAINT "PK_02e49877f1578e6285f84e57ab6" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "userId" uuid NOT NULL`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "documentType"`);
        await queryRunner.query(`CREATE TYPE "public"."kyc_documents_documenttype_enum" AS ENUM('PASSPORT', 'NATIONAL_ID', 'RESIDENCE_PERMIT', 'SELFIE')`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "documentType" "public"."kyc_documents_documenttype_enum" NOT NULL`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "verifiedBy"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "verifiedBy" uuid`);
        await queryRunner.query(`ALTER TABLE "fees" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "fees" ADD "name" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "fees" DROP COLUMN "currency"`);
        await queryRunner.query(`ALTER TABLE "fees" ADD "currency" character varying NOT NULL DEFAULT 'NGN'`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP CONSTRAINT "PK_33a614bad9e61956079d817ebe2"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD "id" uuid NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD CONSTRAINT "PK_33a614bad9e61956079d817ebe2" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ALTER COLUMN "rate" TYPE numeric(10,6)`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP CONSTRAINT "UQ_currencies_code"`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP COLUMN "code"`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD "code" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD CONSTRAINT "UQ_9f8d0972aeeb5a2277e40332d29" UNIQUE ("code")`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD "name" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP COLUMN "symbol"`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD "symbol" character varying NOT NULL`);
        await queryRunner.query(`CREATE INDEX "IDX_692a909ee0fa9383e7859f9b40" ON "notifications" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_82b0deb105275568cdcef2823e" ON "otps" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_288e9a3fe13cfe14abe9824e9c" ON "dispute_messages" ("disputeId") `);
        await queryRunner.query(`CREATE INDEX "IDX_6556efd9c5c3fd6d4ed52151bd" ON "dispute_messages" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_9661150a3f25a5c44c891af56f" ON "disputes" ("transactionId") `);
        await queryRunner.query(`CREATE INDEX "IDX_f49c7610167b5a0754f72ab5e3" ON "disputes" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_0ea46f4f2225f38d127063c367" ON "disputes" ("status") `);
        await queryRunner.query(`CREATE INDEX "IDX_75b351b96bec8017e8b25014fa" ON "transactions" ("transferId") `);
        await queryRunner.query(`CREATE INDEX "IDX_d6385758cb5394ac2fdbfe118a" ON "transfers" ("senderId") `);
        await queryRunner.query(`CREATE INDEX "IDX_6d8e1008c743bac0b9c9266151" ON "transfers" ("receiverId") `);
        await queryRunner.query(`CREATE INDEX "IDX_8faa4633cb8ff14db59673e3b9" ON "transfers" ("paymentMethodId") `);
        await queryRunner.query(`CREATE INDEX "IDX_eaff62410fcb0167e66c5393ce" ON "transfers" ("recipientBankId") `);
        await queryRunner.query(`CREATE INDEX "IDX_580f1dbf7bceb9c2cde8baf7ff" ON "payment_methods" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_97672ac88f789774dd47f7c8be" ON "users" ("email") `);
        await queryRunner.query(`CREATE INDEX "IDX_1e3d0240b49c40521aaeb95329" ON "users" ("phoneNumber") `);
        await queryRunner.query(`CREATE INDEX "IDX_960b80a58c51ab647de27218a5" ON "stripe_payment_methods" ("stripeType") `);
        await queryRunner.query(`CREATE INDEX "IDX_5582c3140c9cdbc6e5f61e0577" ON "kyc_documents" ("userId") `);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "FK_692a909ee0fa9383e7859f9b406" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "otps" ADD CONSTRAINT "FK_82b0deb105275568cdcef2823eb" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD CONSTRAINT "FK_288e9a3fe13cfe14abe9824e9ce" FOREIGN KEY ("disputeId") REFERENCES "disputes"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD CONSTRAINT "FK_6556efd9c5c3fd6d4ed52151bdf" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD CONSTRAINT "FK_f49c7610167b5a0754f72ab5e34" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD CONSTRAINT "FK_9661150a3f25a5c44c891af56fe" FOREIGN KEY ("transactionId") REFERENCES "transactions"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD CONSTRAINT "FK_48d3c70f742399a802c54b2266b" FOREIGN KEY ("resolvedBy") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD CONSTRAINT "FK_75b351b96bec8017e8b25014fab" FOREIGN KEY ("transferId") REFERENCES "transfers"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_8faa4633cb8ff14db59673e3b9f" FOREIGN KEY ("paymentMethodId") REFERENCES "payment_methods"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_6d8e1008c743bac0b9c92661512" FOREIGN KEY ("receiverId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_eaff62410fcb0167e66c5393ce5" FOREIGN KEY ("recipientBankId") REFERENCES "banks"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_d6385758cb5394ac2fdbfe118a3" FOREIGN KEY ("senderId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD CONSTRAINT "FK_580f1dbf7bceb9c2cde8baf7ff4" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" ADD CONSTRAINT "FK_50064b54d514b72a49e2b7bb574" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD CONSTRAINT "FK_8481388d6325e752cd4d7e26c6d" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD CONSTRAINT "FK_5582c3140c9cdbc6e5f61e05773" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD CONSTRAINT "FK_6f9ed61b582f2ea55fec98969ff" FOREIGN KEY ("verifiedBy") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }
    async down(queryRunner) {
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP CONSTRAINT "FK_6f9ed61b582f2ea55fec98969ff"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP CONSTRAINT "FK_5582c3140c9cdbc6e5f61e05773"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP CONSTRAINT "FK_8481388d6325e752cd4d7e26c6d"`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" DROP CONSTRAINT "FK_50064b54d514b72a49e2b7bb574"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP CONSTRAINT "FK_580f1dbf7bceb9c2cde8baf7ff4"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_d6385758cb5394ac2fdbfe118a3"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_eaff62410fcb0167e66c5393ce5"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_6d8e1008c743bac0b9c92661512"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "FK_8faa4633cb8ff14db59673e3b9f"`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP CONSTRAINT "FK_75b351b96bec8017e8b25014fab"`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP CONSTRAINT "FK_48d3c70f742399a802c54b2266b"`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP CONSTRAINT "FK_9661150a3f25a5c44c891af56fe"`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP CONSTRAINT "FK_f49c7610167b5a0754f72ab5e34"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP CONSTRAINT "FK_6556efd9c5c3fd6d4ed52151bdf"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP CONSTRAINT "FK_288e9a3fe13cfe14abe9824e9ce"`);
        await queryRunner.query(`ALTER TABLE "otps" DROP CONSTRAINT "FK_82b0deb105275568cdcef2823eb"`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "FK_692a909ee0fa9383e7859f9b406"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_5582c3140c9cdbc6e5f61e0577"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_960b80a58c51ab647de27218a5"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_1e3d0240b49c40521aaeb95329"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_97672ac88f789774dd47f7c8be"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_580f1dbf7bceb9c2cde8baf7ff"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_eaff62410fcb0167e66c5393ce"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_8faa4633cb8ff14db59673e3b9"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_6d8e1008c743bac0b9c9266151"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_d6385758cb5394ac2fdbfe118a"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_75b351b96bec8017e8b25014fa"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_0ea46f4f2225f38d127063c367"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_f49c7610167b5a0754f72ab5e3"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_9661150a3f25a5c44c891af56f"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_6556efd9c5c3fd6d4ed52151bd"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_288e9a3fe13cfe14abe9824e9c"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_82b0deb105275568cdcef2823e"`);
        await queryRunner.query(`DROP INDEX "public"."IDX_692a909ee0fa9383e7859f9b40"`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP COLUMN "symbol"`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD "symbol" character varying(10) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD "name" character varying(100) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP CONSTRAINT "UQ_9f8d0972aeeb5a2277e40332d29"`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP COLUMN "code"`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD "code" character varying(3) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "currencies" ADD CONSTRAINT "UQ_currencies_code" UNIQUE ("code")`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ALTER COLUMN "rate" TYPE numeric(12,6)`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP CONSTRAINT "PK_33a614bad9e61956079d817ebe2"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD CONSTRAINT "PK_33a614bad9e61956079d817ebe2" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "fees" DROP COLUMN "currency"`);
        await queryRunner.query(`ALTER TABLE "fees" ADD "currency" character varying(3) NOT NULL DEFAULT 'NGN'`);
        await queryRunner.query(`ALTER TABLE "fees" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "fees" ADD "name" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "verifiedBy"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "verifiedBy" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "documentType"`);
        await queryRunner.query(`DROP TYPE "public"."kyc_documents_documenttype_enum"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "documentType" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "userId" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP CONSTRAINT "PK_02e49877f1578e6285f84e57ab6"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD CONSTRAINT "PK_kyc_documents" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "updatedAt" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "updatedAt" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "createdAt" SET DEFAULT CURRENT_TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "createdAt" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" DROP COLUMN "metadata"`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ADD "metadata" jsonb`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "requiresInvite" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "stripe_payment_methods" ALTER COLUMN "isActive" DROP NOT NULL`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "kycStatus"`);
        await queryRunner.query(`DROP TYPE "public"."users_kycstatus_enum"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "kycStatus" character varying NOT NULL DEFAULT 'PENDING'`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "role"`);
        await queryRunner.query(`DROP TYPE "public"."users_role_enum"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "role" character varying NOT NULL DEFAULT 'USER'`);
        await queryRunner.query(`ALTER TABLE "users" DROP CONSTRAINT "PK_a3ffb1c0c8416b9fc6f907b7433"`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "users" ADD CONSTRAINT "PK_a3ffb1c0c8416b9fc6f907b7433" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "kycReviewedBy"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "kycReviewedBy" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "dateOfBirth"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "dateOfBirth" TIMESTAMP`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP CONSTRAINT "UQ_8481388d6325e752cd4d7e26c6d"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "userId" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD CONSTRAINT "UQ_8481388d6325e752cd4d7e26c6d" UNIQUE ("userId")`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP CONSTRAINT "PK_1ec6662219f4605723f1e41b6cb"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD CONSTRAINT "PK_1ec6662219f4605723f1e41b6cb" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "user_profiles" ADD CONSTRAINT "FK_8481388d6325e752cd4d7e26c6d" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" ADD "userId" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "beneficiaries" ADD CONSTRAINT "FK_50064b54d514b72a49e2b7bb574" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP COLUMN "type"`);
        await queryRunner.query(`DROP TYPE "public"."payment_methods_type_enum"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD "type" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD "userId" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP CONSTRAINT "PK_34f9b8c6dfb4ac3559f7e2820d1"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD CONSTRAINT "PK_34f9b8c6dfb4ac3559f7e2820d1" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "payment_methods" ADD CONSTRAINT "FK_580f1dbf7bceb9c2cde8baf7ff4" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "notes"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "notes" character varying`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "recipientBankId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "recipientBankId" character varying`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "paymentMethodId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "paymentMethodId" character varying`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "status"`);
        await queryRunner.query(`DROP TYPE "public"."transfers_status_enum"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "status" character varying NOT NULL DEFAULT 'PENDING'`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "receiverId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "receiverId" character varying`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "senderId"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "senderId" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP CONSTRAINT "PK_f712e908b465e0085b4408cabc3"`);
        await queryRunner.query(`ALTER TABLE "transfers" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "PK_f712e908b465e0085b4408cabc3" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_8faa4633cb8ff14db59673e3b9f" FOREIGN KEY ("paymentMethodId") REFERENCES "payment_methods"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_6d8e1008c743bac0b9c92661512" FOREIGN KEY ("receiverId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_d6385758cb5394ac2fdbfe118a3" FOREIGN KEY ("senderId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "banks" DROP CONSTRAINT "PK_3975b5f684ec241e3901db62d77"`);
        await queryRunner.query(`ALTER TABLE "banks" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "banks" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "banks" ADD CONSTRAINT "PK_3975b5f684ec241e3901db62d77" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "transfers" ADD CONSTRAINT "FK_eaff62410fcb0167e66c5393ce5" FOREIGN KEY ("recipientBankId") REFERENCES "banks"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "status"`);
        await queryRunner.query(`DROP TYPE "public"."transactions_status_enum"`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "status" character varying NOT NULL DEFAULT 'PENDING'`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "type"`);
        await queryRunner.query(`DROP TYPE "public"."transactions_type_enum"`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "type" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "transferId"`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "transferId" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP CONSTRAINT "PK_a219afd8dd77ed80f5a862f1db9"`);
        await queryRunner.query(`ALTER TABLE "transactions" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD CONSTRAINT "PK_a219afd8dd77ed80f5a862f1db9" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "transactions" ADD CONSTRAINT "FK_75b351b96bec8017e8b25014fab" FOREIGN KEY ("transferId") REFERENCES "transfers"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "resolvedBy"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "resolvedBy" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "priority"`);
        await queryRunner.query(`DROP TYPE "public"."disputes_priority_enum"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "priority" character varying NOT NULL DEFAULT 'MEDIUM'`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "status"`);
        await queryRunner.query(`DROP TYPE "public"."disputes_status_enum"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "status" character varying NOT NULL DEFAULT 'OPEN'`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "category"`);
        await queryRunner.query(`DROP TYPE "public"."disputes_category_enum"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "category" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "userId" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "transactionId"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "transactionId" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP CONSTRAINT "PK_3c97580d01c1a4b0b345c42a107"`);
        await queryRunner.query(`ALTER TABLE "disputes" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD CONSTRAINT "PK_disputes" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD "userId" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP COLUMN "disputeId"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD "disputeId" character varying(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP CONSTRAINT "PK_8826f78d556a1846f8cbad5ed05"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD CONSTRAINT "PK_dispute_messages" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "otps" DROP COLUMN "type"`);
        await queryRunner.query(`DROP TYPE "public"."otps_type_enum"`);
        await queryRunner.query(`ALTER TABLE "otps" ADD "type" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "otps" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "otps" ADD "userId" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "otps" DROP CONSTRAINT "PK_91fef5ed60605b854a2115d2410"`);
        await queryRunner.query(`ALTER TABLE "otps" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "otps" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "otps" ADD CONSTRAINT "PK_91fef5ed60605b854a2115d2410" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "otps" ADD CONSTRAINT "FK_82b0deb105275568cdcef2823eb" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "message"`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "message" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "type"`);
        await queryRunner.query(`DROP TYPE "public"."notifications_type_enum"`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "type" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "userId"`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "userId" character varying NOT NULL`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "PK_6a72c3c0f683f6462415e653c3a"`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP COLUMN "id"`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD "id" character varying(255) NOT NULL DEFAULT uuid_generate_v4()`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "PK_6a72c3c0f683f6462415e653c3a" PRIMARY KEY ("id")`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "FK_692a909ee0fa9383e7859f9b406" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "currencies" DROP COLUMN "decimalPlaces"`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "isTwoFactorEnabled"`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD "lastUpdated" TIMESTAMP NOT NULL DEFAULT now()`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD "source" character varying NOT NULL DEFAULT 'EXTERNAL_API'`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD "sellRate" numeric(12,6)`);
        await queryRunner.query(`ALTER TABLE "exchange_rates" ADD "buyRate" numeric(12,6)`);
        await queryRunner.query(`ALTER TABLE "fees" ADD "maximumAmount" numeric(20,2)`);
        await queryRunner.query(`ALTER TABLE "fees" ADD "minimumAmount" numeric(20,2)`);
        await queryRunner.query(`ALTER TABLE "users" ADD "profileId" character varying(255)`);
        await queryRunner.query(`ALTER TABLE "users" ADD CONSTRAINT "REL_b1bda35cdb9a2c1b777f5541d8" UNIQUE ("profileId")`);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_7102206bea45893b7fd8f9e5dd" ON "exchange_rates" ("fromCurrency", "toCurrency") `);
        await queryRunner.query(`CREATE INDEX "IDX_kyc_documents_userId" ON "kyc_documents" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_stripe_payment_methods_category" ON "stripe_payment_methods" ("category") `);
        await queryRunner.query(`CREATE INDEX "IDX_stripe_payment_methods_stripeType" ON "stripe_payment_methods" ("stripeType") `);
        await queryRunner.query(`CREATE INDEX "transfers_senderId_fkey" ON "transfers" ("senderId") `);
        await queryRunner.query(`CREATE INDEX "transactions_transferId_fkey" ON "transactions" ("transferId") `);
        await queryRunner.query(`CREATE INDEX "IDX_disputes_userId" ON "disputes" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_disputes_transactionId" ON "disputes" ("transactionId") `);
        await queryRunner.query(`CREATE INDEX "IDX_dispute_messages_userId" ON "dispute_messages" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_dispute_messages_disputeId" ON "dispute_messages" ("disputeId") `);
        await queryRunner.query(`CREATE INDEX "otps_userId_fkey" ON "otps" ("userId") `);
        await queryRunner.query(`CREATE INDEX "notifications_userId_fkey" ON "notifications" ("userId") `);
        await queryRunner.query(`ALTER TABLE "kyc_documents" ADD CONSTRAINT "FK_kyc_documents_userId" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "users" ADD CONSTRAINT "FK_b1bda35cdb9a2c1b777f5541d87" FOREIGN KEY ("profileId") REFERENCES "user_profiles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "disputes" ADD CONSTRAINT "FK_disputes_userId" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD CONSTRAINT "FK_dispute_messages_userId" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "dispute_messages" ADD CONSTRAINT "FK_dispute_messages_disputeId" FOREIGN KEY ("disputeId") REFERENCES "disputes"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
    }
}
exports.Add2FAFlagToUsers1768221142492 = Add2FAFlagToUsers1768221142492;
//# sourceMappingURL=1768221142492-Add2FAFlagToUsers.js.map